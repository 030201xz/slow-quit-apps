# Slow Quit Apps

<p align="center">
  <img src="BuildAssets/AppIcon.png" width="128" height="128" alt="Slow Quit Apps アイコン">
</p>

<p align="center">
  <strong>⌘Q / ⌘W の長押しで、誤操作によるアプリ終了・ウィンドウ閉じを防止</strong>
</p>

<p align="center">
  <a href="#機能">機能</a> •
  <a href="#インストール">インストール</a> •
  <a href="#使い方">使い方</a> •
  <a href="#設定">設定</a> •
  <a href="#ビルド">ビルド</a> •
  <a href="#ライセンス">ライセンス</a>
</p>

<p align="center">
  <a href="README.md">English</a> |
  <a href="README.zh-CN.md">简体中文</a> |
  <a href="README.ru.md">Русский</a>
</p>

---

## 機能

- 🛡️ **誤終了を防止** — ⌘Q を長押しするまでアプリは終了しない
- 🪟 **誤ウィンドウ閉じを防止** — ⌘W を長押しするまでウィンドウは閉じない
- ⏱️ **時間調整可能** — 0.3 秒〜3.0 秒で長押し時間を設定
- 📋 **除外リスト** — 特定のアプリを即時終了/閉じ可能にする
- 🌐 **多言語対応** — 英語・中国語（簡体字）・日本語・ロシア語
- 🎨 **ネイティブ macOS デザイン** — システム UI と自然に溶け込むプログレスリング
- 💾 **設定の永続化** — JSON ファイルに設定を保存

## 必要条件

- macOS 14.0 (Sonoma) 以降
- アクセシビリティ権限

## インストール

### DMG からインストール（推奨）

1. [Releases](../../releases) から最新版をダウンロード
2. DMG ファイルを開く
3. `SlowQuitApps.app` を「アプリケーション」フォルダにドラッグ
4. アプリを開き、アクセシビリティ権限を付与

### ソースからビルド

```bash
git clone https://github.com/030201xz/slow-quit-apps.git
cd slow-quit-apps
./build.sh
```

## 使い方

### 初回セットアップ

1. **アクセシビリティ権限を付与**
   - アプリを開く → システム設定が自動的に開く
   - **プライバシーとセキュリティ → アクセシビリティ** へ移動
   - **SlowQuitApps** をオンに切り替える
   - 設定ウィンドウで**アプリを再起動**をクリック

2. **メニューバーアイコンから設定**
   - メニューバーアイコンをクリック
   - **⌘Q を有効化** / **⌘Q を無効化** — 長押し終了の切り替え
   - **⌘W を有効化** / **⌘W を無効化** — 長押しウィンドウ閉じの切り替え
   - **設定…** — 長押し時間・除外リスト・言語の設定

### 動作の仕組み

| 操作 | 結果 |
|------|------|
| ⌘Q を短く押す | 何も起こらない（終了キャンセル） |
| ⌘Q を設定時間長押し | アプリが終了 |
| ⌘Q を途中で離す | 終了キャンセル、リセット |
| 除外リストのアプリで ⌘Q | 即座に終了 |
| ⌘W を短く押す | 何も起こらない（閉じキャンセル） |
| ⌘W を設定時間長押し | ウィンドウが閉じる |
| ⌘W を途中で離す | 閉じキャンセル、リセット |
| 除外リストのアプリで ⌘W | 即座に閉じる |

## 設定

### 設定ファイルの場所

```
~/Library/Application Support/SlowQuitApps/config.json
```

### 利用可能なオプション

| キー | 説明 | デフォルト |
|------|------|---------|
| `quitOnLongPress` | ⌘Q 長押し終了を有効化 | `true` |
| `closeWindowOnLongPress` | ⌘W 長押し閉じを有効化 | `true` |
| `holdDuration` | 長押し時間（秒） | `1.0` |
| `launchAtLogin` | ログイン時に起動 | `false` |
| `showProgressAnimation` | プログレスリングを表示 | `true` |
| `language` | UI 言語 | `en` |
| `excludedApps` | 除外アプリリスト | Finder・ターミナル |

### 対応言語

| コード | 言語 |
|--------|------|
| `en` | English |
| `zh-CN` | 简体中文 |
| `ja` | 日本語 |
| `ru` | Русский |

## ビルド

### 前提条件

- Xcode 16.0+ または Swift 6.0+
- macOS 14.0+

### ビルドコマンド

```bash
# 開発ビルド
swift build

# リリース .app バンドル（ad-hoc 署名）
./build.sh
```

## トラブルシューティング

### 再ビルド後にアクセシビリティ権限がリセットされる

ad-hoc 署名のアプリはバイナリが変わるとアクセシビリティの信頼が失われます。再ビルドのたびに、**システム設定 → プライバシーとセキュリティ → アクセシビリティ** で SlowQuitApps を一度削除して再追加し、アプリを再起動してください。

### ⌘Q や ⌘W をインターセプトしない

1. アクセシビリティ権限が付与されているか確認
2. 設定で**アプリを再起動**をクリック
3. 対象アプリが除外リストにないことを確認
4. メニューバーで対象のトグル（⌘Q または ⌘W）が有効になっているか確認

## 貢献

Issues や Pull Request を歓迎します。

## ライセンス

MIT ライセンス — 詳細は [LICENSE](LICENSE) を参照

---

<p align="center">
  macOS のために ❤️ を込めて作成
</p>
